# 基础
- 运行
    ```mermaid
    flowchart TB
    预处理cpp --> |编译器|汇编代码 --> |汇编|.o文件 --> |链接|可执行程序
    ```
    - 各文件独立编译，然后链接编译结果
    - .h头文件里统一声明变量和函数

- 头文件
    - .h头文件中，只能存在变量或者函数的声明，而不要放定义：一个符号在整个程序中可以被声明多次，但却要且仅要被定义一次，编译器在编译的时候会生成一个符号表（symbol table），看不到定义的符号会被存放在这个表中，进行链接的时候，编译器会在别的目标文件中去寻找符号的定义。
    - 可包含的内容
        - 声明：extern int a; void f();
        - 定义：const对象; static对象; 内联函数（inline）的定义; 类（class）的定义.
        > const int a; 全局的 const 对象默认是没有 extern 的声明的，所以它只在当前文件中有效。把这样的对象写进头文件中，即使它被包含到其他多个 .cpp 文件中，这个对象也都只在包含它的那个文件中有效，对其他文件来说是不可见的，所以便不会导致多重定义。
        > static同const对象。
        > inline函数是需要编译器在遇到它的地方根据它的定义把它内联展开的，而并非是普通函数那样可以先声明再链接的（内联函数不会链接），所以编译器就需要在编译时看到内联函数的完整定义才行。 C++ 规定，内联函数可以在程序中定义多次，只要内联函数在一个 .cpp 文件中只出现一次，并且在所有的 .cpp 文件中这个内联函数的定义是一样的，就能通过编译。
        > 在程序中创建一个类的对象时，编译器只有在这个类的定义完全可见的情况下，才能知道这个类的对象应该如何布局，所以关于类的定义的要求跟内联函数是基本一样的。类的定义中包含着数据成员和函数成员，数据成员是要等到具体的对象被创建时才会被定义（分配空间），但函数成员却是需要在一开始就被定义的，这也就是我们通常所说的类的实现。一般，我们的做法是，把类的定义放在头文件中，而把函数成员的实现代码放在一个 .cpp 文件中。这是可以的，也是很好的办法。另一种办法是直接把函数成员的实现代码也写进类定义里面。在 C++ 的类中，如果函数成员在类的定义体中被定义，那么编译器会视这个函数为内联的。因此，把函数成员的定义写进类定义体，一起放进头文件中，是合法的。注意一下，如果把函数成员的定义写在类定义的头文件中，而没有写进类定义中，这是不合法的，因为这个函数成员此时就不是内联的了。
    - 头文件中的保护措施：通过 #define 定义一个名字，并且通过条件编译 #ifndef...#endif 使得编译器可以根据这个名字是否被定义，再决定要不要继续编译该头文中后续的内容。
    - 源文件如何根据 #include 来关联头文件：源文件如何根据 #include 来关联头文件；用户自定义的文件用双引号括起来，编译器首先会在用户目录下查找，然后在到 C++ 安装目录（比如 VC 中可以指定和修改库文件查找路径，Unix 和 Linux 中可以通过环境变量来设定）中查找，最后在系统文件中查找。
    - 头文件如何来关联源文件：编译的时候 .h 头文件并不会去找 .cpp 源文件中的定义实现，只有在 link 的时候才进行这个工作。在 link 的时候，需要在 makefile 里面说明需要连接哪个 .o 或 .obj 文件（在这里是 .cpp 生成的 .o 或 .obj 文件），连接器会去这个 .o 或 .obj 文件中找在 .cpp 中实现的函数，再把他们 build 到 makefile 中指定的那个可以执行文件中。在 VC 中，一帮情况下不需要自己写 makefile，只需要将需要的文件都包括在 project中，VC 会自动帮你把 makefile 写好。通常，C++ 编译器会在每个 .o 或 .obj 文件中都去找一下所需要的符号，而不是只在某个文件中找或者说找到一个就不找了。因此，如果在几个不同文件中实现了同一个函数，或者定义了同一个全局变量，链接的时候就会提示 "redefined"。
    - .h文件中能包含：
        static 普通变量和普通函数的定义
        类的内联函数的定义
        类成员数据的声明，但不能赋值
        非类成员函数的声明
    - .h文件中不能包含：
        非静态变量（不是类的数据成员）的声明
        static 成员函数和成员变量的定义：static 关键字是为了限制可见性，用于仅本文件可见。而 static 修饰类的成员变量时，该成员是属于类本身，所有类的实例对象共享。static 成员变量并不限制仅本文件可见，所以头文件中不能包含static 成员函数和成员变量的定义，只能声明。
        默认命名空间声明不要放在头文件，using namespace std;等应放在.cpp中，在 .h 文件中使用 std::string

